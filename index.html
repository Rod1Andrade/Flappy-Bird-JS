<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Flappy Bird JS</title>

  <style>

    #screen {
      border: 1px solid #CCC;
      margin: 0 auto;
    }

  </style>

</head>
<body>

  <!-- This in Canvas, where the game is rendered -->
  <canvas id="screen" width="366" height="512"></canvas>
  
  <script>

    const screen = document.getElementById('screen');
    const context = screen.getContext('2d'); 

    const w = screen.width;
    const h = screen.height;

    const bird = {
      assets : {
        src: 'Assets/sprites/bluebird-midflap.png',
      },
      location: {
        x: 30,
        y: (h + 32) / 2,
      },
      color: 'yellow',
    }

    const pipes = [
      {
        assets: {},
        location: {x: w - 32, y: h - 100 },
        color: 'green',
      },
      {
        assets: {},
        location: { x: w - 32, y: 0 },
        color: 'green',
      }
    ];
    
    renderedScreen();

    function renderedScreen() {

      // Limpa a tela      
      context.fillStyle = '#F00';
      context.rect(0, 0, w, h);

      // Para cada cano existente Ã© feito o desenho
      pipes.forEach(pipe => drawPipe(pipe));
      drawFlappy(bird);
      requestAnimationFrame(renderedScreen());
    }

    function drawFlappy(bird) {
      context.beginPath();
      context.rect(bird.location.x, bird.location.y, 32, 24);
      context.fillStyle = bird.color;
      context.fill();
      context.closePath();
    }

    function drawPipe(pipe) {
        context.beginPath();
        context.rect(pipe.location.x, pipe.location.y, 32, 100);
        context.fillStyle = pipe.color;
        context.fill();
        context.closePath();
    }

  </script>


</body>
</html>